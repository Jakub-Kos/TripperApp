<Window x:Class="TripPlanner.Wpf.Views.JoinTripDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:TripPlanner.Wpf.ViewModels"
        xmlns:conv="clr-namespace:TripPlanner.Wpf.Converters"
        Title="Join Trip" SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        MinWidth="500" MinHeight="320">
  <Window.Resources>
    <conv:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
    <conv:EnumEqualsConverter x:Key="EnumEqualsConverter"/>
    <conv:JoinModeToVisibility x:Key="JoinModeToVisibility"/>
    <BooleanToVisibilityConverter x:Key="BoolToVis"/>
  </Window.Resources>
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <TextBlock Text="Join a trip" FontWeight="Bold" FontSize="16"/>

    <!-- Single-step: enter code, then choose action -->
    <StackPanel Grid.Row="1" Orientation="Vertical" Margin="0,8,0,12">
      <TextBlock Text="Enter invite or claim code you received."/>
      <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
        <TextBlock Text="Code:" VerticalAlignment="Center" Width="100"/>
        <TextBox Width="260" Text="{Binding InviteCode, UpdateSourceTrigger=PropertyChanged}"/>
      </StackPanel>
    </StackPanel>

    <!-- Footer -->
    <DockPanel Grid.Row="3" Margin="0,12,0,0">
      <TextBlock DockPanel.Dock="Left" Text="{Binding Status}" Foreground="Gray" VerticalAlignment="Center"/>
      <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
        <Button Content="Claim placeholder" Margin="0,0,8,0"
                IsEnabled="{Binding Busy, Converter={StaticResource InverseBooleanConverter}}"
                Command="{Binding ClaimCommand}"/>
        <Button Content="Join as me"
                IsEnabled="{Binding Busy, Converter={StaticResource InverseBooleanConverter}}"
                Command="{Binding JoinCommand}"/>
        <Button Content="Cancel" Margin="8,0,0,0"
                IsEnabled="{Binding Busy, Converter={StaticResource InverseBooleanConverter}}"
                Command="{Binding CancelCommand}"/>
      </StackPanel>
    </DockPanel>
  </Grid>
</Window>
